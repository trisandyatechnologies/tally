// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  firmname      String
  owner         String
  address       String
  gstNo         String
  email         String?         @unique
  emailVerified Boolean         @default(false)
  phone         String          @unique
  password      String?
  GoodsSupplier GoodsSupplier[]
  Payment       Payment[]
  Bill          Bill[]
}

model GoodsSupplier {
  id       String    @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  address  String
  contact  String
  gstNo    String
  aadhar   String
  owner    String
  userId   String    @db.ObjectId
  user     User      @relation(fields: [userId], references: [id])
  payments Payment[]
  bills    Bill[]
}

model Payment {
  id              String         @id @default(auto()) @map("_id") @db.ObjectId
  date            DateTime?
  amount          Int?
  voucherNo       String?
  receiver        String
  note            String?
  type            PaymentType
  paymentMethod   PaymentMethod
  goodsSupplierId String?        @db.ObjectId
  goodsSupplier   GoodsSupplier? @relation(fields: [goodsSupplierId], references: [id])
  userId          String?        @db.ObjectId
  user            User?          @relation(fields: [userId], references: [id])
}

enum PaymentMethod {
  GOOGLEPAY
  PHONEPAY
  OTHER
}

enum PaymentType {
  CASH
  DIGITAL
}

model Bill {
  id              String        @id @default(auto()) @map("_id") @db.ObjectId
  name            String
  date            DateTime
  amount          Float
  type            BillType
  goodsSupplierId String        @db.ObjectId
  goodsSupplier   GoodsSupplier @relation(fields: [goodsSupplierId], references: [id])
  userId          String        @db.ObjectId
  user            User          @relation(fields: [userId], references: [id])
}

enum BillType {
  GST
  NON_GST
}
